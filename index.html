<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js">
</script>
<script>
function GetRandomCountry(){var country="";var countries=new Array("Afghanistan","Albania","Algeria","Andorra","Angola","Antarctica","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burma","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo, Democratic Republic","Congo, Republic of the","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Greenland","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, North","Korea, South","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Mongolia","Morocco","Monaco","Mozambique","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Samoa","San Marino"," Sao Tome","Saudi Arabia","Senegal","Serbia and Montenegro","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe");country=countries[Math.floor(Math.random()*countries.length)];return country}$(document).ready(function(){$("#random").click(function(){var rand_name=GetRandomCountry();var url="http://en.wikipedia.org/w/api.php?action=query&list=allimages&ailimit=30&format=json&aifrom="+rand_name+"&callback=?";console.log(url);$.getJSON(url,function(data){var rand_num=Math.floor(Math.random()*31);$("#rimg").html("<br> <img src= \""+data.query.allimages[rand_num].url+" \" />")})})});
</script>
<script language="javascript">
var valeur=0;
function modifier(increment) {
    valeur+=increment;
    document.getElementById('text').value=valeur;
    if (valeur != 0) {
	$("#text").val(valeur + ' amis');
    } else {
	$("#text").val(valeur + ' ami');
    }
    if (increment > 0) {
	$("#le-chat").append("<li class='un-pot'><a href='#'>" + filemoiunpotz() + ' ' + is_online() + "</a></li>");
    } else if (increment < 0) {
	$(".un-pot").first().remove();
    }
}
</script>
<style>
h1 {
div.flux{height:100%;width:100%;float:left;position:relative}
img{float:left;max-width:100%;border:1px solid #021a40;margin-right:2cm;padding:1px}
font-family: Verdana, sans-serif;
line-height: 1em;
color: #a1a9ff;
font-weight:bold;
font-style:italic;
font-size: 111px;
text-shadow:0px 0px 0 rgb(103,111,197),1px 1px 0 rgb(93,101,187),2px 2px 0 rgb(83,91,177),3px 3px 0 rgb(74,82,168),4px 4px 0 rgb(64,72,158),5px 5px 0 rgb(54,62,148),6px 6px 0 rgb(44,52,138),7px 7px 0 rgb(34,42,128),8px 8px 0 rgb(24,32,118),9px 9px 0 rgb(15,23,109),10px 10px 0 rgb(5,13,99),11px 11px 0 rgb(-5,3,89),12px 12px 0 rgb(-15,-7,79), 13px 13px 0 rgb(-25,-17,69),14px 14px 13px rgba(0,0,0,0),14px 14px 1px rgba(0,0,0,0.5),0px 0px 13px rgba(0,0,0,.2);}

#jeu{
display: none;}

#boite-chat {
    background-color: rgb(103,111,197);
    width: 400px;
    height: 400px;
    position: absolute;
    bottom: 0px;
    right: 0px;
}

#barduo {
    padding: 2px;
    border-bottom: 1px solid #FFFFFF;
}

#pot-name {
    margin: 0;
    width: 350px;
    float: left;
}

#bardubas {
    position: absolute;
    bottom: 0px;
}

#pot-parle {
    width: 350px;
    float: left;
}

#pot-go {
    width: 50px;
    position: absolute;
    bottom: 0px;
    float: right;
}

#bardubas {
    clear: both;
}

#pot-conv {
    list-style-type: none;
    padding: 0px;
    margin: 0px;
    overflow: scroll;
    height: 330px;
    width: 400px;
    position: absolute;
    top: 30px;
    right: 0px;
}

.kan {
    color: #303030;
}
</style>
</head>
<body>
<center>
<h1>Facebook 2</h1>


<form>
<input type="radio" name="sex" value="male">Connecté<br>
<input type="radio" name="sex" value="female">Déconnecté
</form>

<textarea rows="4" cols="50">
document texte en ligne
</textarea>
<br>

<input type="button" value="enlever un ami" onClick="modifier(-1)">
<input type="text" id="text" value="0" size="6" readonly="true" style="border:#FFFFFF none 0px; text-align:center; font-size:30px">
<input type="button" value="ajouter un ami" onClick="modifier(1)">
<br>


<button onclick="notific()">Notification</button>

<script>
function notific() {
    alert("Vous avez une notification !");
}
</script>


<button onclick="myFunction()">Partager du contenu intéractif</button>
<script>
  function myFunction() {
  var random = Math.floor(Math.random() * 3);
  switch (random) {
    case 0:
      var x = document.createElement("INPUT");
      x.setAttribute("type", "checkbox");
    break;
    case 1:
      var x = document.createElement("INPUT");
      x.setAttribute("type", "radio");
    break;
    case 2:
      var x = document.createElement("INPUT");
      x.setAttribute("type", "button");
      x.setAttribute("value", "x");
    break;
  }
  document.body.appendChild(x);
}</script>

<br><br>


flux d'acutalité :
<br>
<button id="random">Photos</button>
    <div id="rimg"> </div>
<br>

<p>bouton j'aime :<input type="button" class="bouton" id="bou" onclick="grossir()" Value="J'aime">

	<script type="text/javascript">
	var taille = 1;

	function grossir(){
		taille++;
		document.getElementById('bou').style.width = (50 * taille) + "px";
		document.getElementById('bou').style.height = (20 * taille) + "px";
		document.getElementById('bou').style.fontSize = (8 * taille) + "px";
	}
	</script>
	</p>


<input type="button" onclick="jeux()" Value="Jeu">

<div id="jeu">
<br><form>
<input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><br>
<input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><br>
<input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><br>
<input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><input type="radio" name="g"><br>
</form><br>
<input type="button" onclick="stopjeu()" Value="arrêter de jouer">
</div>

<script>

function jeux() {
	document.getElementById("jeu").style.display='block';
	}

function stopjeu() {
document.getElementById("jeu").style.display='none';
}
</script>
</center>

<h2><a href="#" id="oh-le-chat">CHAT</a></h2>
<ul id="le-chat">
</ul>

<div id="boite-chat">
    <div id="barduo">
    <h4 id="pot-name">marcel</h4>
    <div id="kloz"><a href="#">[X]</a></div>
    <div class="nettoyage" /></div>
    </div>
    <ul id="pot-conv">
    </ul>
    <div id="bardubas">
       <input type="text" id="pot-parle" />
       <input type="submit" id="pot-go" value="OK" />
       <div class="nettoyage" />
    </div>
</div>

<script>
var filemoiunpotz = function () {
    var potz = ['Jean', 'Jacques', 'Georges', 'Michel', 'Marcel', 'Raymond', 'Robert', 'Regis', 'Eugene', 'Francois', 'Yves', 'Yvette', 'Gertrude', 'Brigitte', 'Micheline', 'Oui', 'Non', 'Un-Gomme', 'Gros', 'Phil', 'Phil Coupon', 'Gertrude', 'Philemon', 'Daniel', 'Esteban', 'David', 'Antoine', 'Diego', 'Junior', 'Gerard', 'Charles', 'Michael', 'Regis', 'Anakin', 'Renaud', 'Yannick', 'Sebastien', 'Manfred', 'Julien', 'Vadim', 'James', 'Louis', 'Martin', 'Gregoire', 'Vincent', 'Nicolas', 'Sarah', 'Jeanne', 'Daniel', 'Marie', 'Steve', 'Romain', 'Pierre', 'Coralie', 'Laurent', 'Esteban', 'Axel', 'Richard', 'Bob', 'Eude', 'Bastien', 'Yann', 'Edouard', 'Bobby', 'Christian', 'Nathan', 'Alex', 'Aline', 'Momo', 'Sylvain', 'Mohamed', 'Jackie', 'Michelle', 'Jacquie', 'Rodolphe', 'Auguste', 'Augustin', 'Hypolite', 'Gregory', 'Jacqueline', 'Rodrigo', 'Maurice', 'Rocco', 'Chang', 'Bruce', 'Nassim', 'Gwendal', 'Leo', 'Leonard', 'Enzo', 'Claire', 'Manon', 'Camille', 'Jonathan', 'Solvik', 'Gordon', 'Murdoch', 'Anakin', 'Kyle', 'Ken', 'Ryu', 'Agatha', 'Loana', 'Gaspard', 'Baltazar', 'Angus'];
    var super_nom = "";
    var max = Math.random() * 3;
    for (var i = 0; i < max; ++i) {
        super_nom += potz[Math.floor(Math.random() * potz.length)] + '-';
    }
    super_nom += potz[Math.floor(Math.random() * potz.length)];
    return '<span class="name">' + super_nom + '</span>';
}
var is_online = function () {
    if (Math.floor(Math.random() * 2) == 1) {
	return "[<span style='color: #00FF00;'>là</span>]";
    }
    return "[<span style='color: #FF0000;'>paslà</span>]";
}

var potz_num = Math.floor(Math.random() * 10 + 3);
valeur = potz_num;
modifier(0);

for (var i = 0; i < potz_num; ++i) {
    $("#le-chat").append("<li class='un-pot'><a href='#'>" + filemoiunpotz() + ' ' + is_online() + "</a></li>");
}
$("#le-chat").hide();
$("#oh-le-chat").click(function () {
    $("#le-chat").toggle();
    return false;
});
$("#boite-chat").hide();
$('.un-pot').live('click', function () {
    $("#pot-conv").html("");
    $("#boite-chat").show();
    $("#pot-name").html($(this).find(".name").html());
});
$("#kloz").click(function () {
    $("#boite-chat").hide();
});

// ici, fais gaffe
var markov_db = '';
markov_db += "Peu m'importe que tu ne parles pas. Peu m'importe que tu n'aies pas de bras. Tu danses. Tu danses. Peu m'importe que tu ne saches pas rigoler. Et que tu ne puisses pas m'écouter. Près de toi je me sens bien. Près de toi je ne sens rien. La vie t'a fait comme tu es. Et comme tu es, tu es beau et. Tu danses. Tu danses. La vie t'a fait comme tu es. Et comme tu es, tu es beau et. Tu DANSES. Tu DANSES. Peu m'importe que tu manges de la boue. Et que tu ne puisses pas te tenir debout. Tu danses. Tu danses. Peu m'importe ta drôle de libido. Tu ne respires que sous l'eau. Près de toi je me sens bien. Près de toi je ne sens rien. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Peu m'importe que tu n'aies pas de dent. Quand tu danses tu ne prends pas d'élan. Oh non pas d'élan. Non non non. Non non non. Peu m'importe que tu sois tout mou. Je suis sûr qu'au fond tu es très fort car. Tu danses. Tu danses. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Gastéropode Invertébré. Escargot des mers";
markov_db += "FULL HD. Full HD. FULL HD. FULL HD D D D D. FULL HD. FULLA FULA FULAAAA. Dans ma clé usb. J'ai une photo de toi. Elle pèse 2 méga. Mais dans mon cœur. Ca fait au moins du 30 giga. Et ça rentre même pas. Dans ma clé usb. J'ai une photo de toi. Elle pèse 2 méga. Mais dans mon cœur. Ca fait au moins du 30 giga. Et ça rentre même pas. Dans ma clé. USB. J'ai une photo de toi. Full HD. Full HD. Dans ma clé usb. J'ai une photo de toi. Elle pèse 2 méga. Mais dans mon cœur. Ca fait au moins du. 30 giga ça prend beaucoup de place. Mais ça veut pas dire que tu es grosse. C'est mon amour pour toi qui prend toute la place. Comme les disques durs qui saturent. Et c'est pour ça que j'ai fait la métaphore. Je t'aime en haute définition. Je t'aime en haute définition. FULL, H, D !. Dans ma clé usb. J'ai une photo de toi. Elle pèse 2 méga. Mais dans mon cœur. Ca fait au moins du 30 giga. Et ça rentre même pas ";
markov_db += "Les hommes se nourrissent d'animaux sauvages qu'ils chassent et de fruits qu'ils cueillent. On les appelle les chasseurs-cueilleurs. Ils sont nomades et se déplacent en suivant les principaux troupeaux d'animaux. Mais a partir de 12000 av JC ils vont changer d’habitude. C’est la révolution néolithique. Elle a lieu dans une région que l'on appelle le Croissant fertile. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. CROISSANT CROISSANT FERTILE FERTILE. Les hommes vont alors cultiver des céréales. C'est l'apparition de l'agriculture vers 8 000 avant JC. Née dans le croissant fertile, cette révolution que l'on appelle néolithique, se diffuse en suivant les grandes voies de communication que sont la vallée du danube et les côtes de la méditerranée. Croissant Fertile Croissant Fertile Croissant Fertile Na na na na na naaa. En -3500, dans ce même lieu, naît l'écriture. Ainsi l'homme passe de la préhistoire à l'Histoire.";
// todo: nourrir le bot avec plus de paroles

var super_db = {};
var phrases = markov_db.split(".");
for (var phrase in phrases) {
    var mots = phrases[phrase].split(" ");
    var previous = '';
    for (var mot in mots) {
	if (previous.length > 0) {
	    if (super_db[previous] == undefined) {
		super_db[previous] = {};
	    }
	    if (super_db[previous][mots[mot]] == undefined) {
		super_db[previous][mots[mot]] = 0;
	    }
	    super_db[previous][mots[mot]]++;
	}
	previous = mots[mot];
    }
}
// ici, super_db contient pour chaque mot, les mots suivants possibles avec un coefficient de probabilité

var repondstp = function (pot, text) {
    var response_length = Math.floor(Math.random() * 15 + 1);
    var mots = text.split(" ");
    var current = '';

    // choppe un mot connu de la super_db, sinon random
    for (var i = mots.length; i > 0; --i) {
	var mot = mots[i - 1];
	if (super_db[mot] != undefined) {
	    current = mot;
	    break;
	}
    }

    // moche
    var reponse = '';
    for (var i = 0; i < response_length; ++i) {
	if (super_db[current] == undefined) {
	    var ks = Object.keys(super_db);
	    current = ks[Math.floor(ks.length * Math.random())];
	}
	var tmp = [];	
	for (var j in super_db[current]) {
	    for (var k = 0; k < super_db[current][j]; ++k) {
		tmp.push(j);
	    }
	}
	var mot = tmp[Math.floor(Math.random() * tmp.length)];
	if (reponse.length != 0) {
	    reponse += ' ';
	}
	reponse += mot;
	current = mot;
    }

    return pot + ': ' + reponse + '.';
}

var rrepond = function () {
    var text = $("#pot-parle").val();
    if (text.length > 0) {
	var when = Math.floor(Math.random() * 24) + ':' + Math.floor(Math.random() * 60);
	$("#pot-parle").val('');
	$("#pot-conv").append('<li><span class="kan">' + when + '</span>moi: ' + text + '</li>');
	var response = repondstp($("#pot-name").html(), text);
	$("#pot-conv").append('<li><span class="kan">' + when + '</span> ' + response + '</li>');
    }
}

$("#pot-go").click(function () {
    rrepond();
    return false;
});

$("#pot-parle").keyup(function (event) {
    if (event.keyCode == 13) {
	rrepond();
    }
});
</script>

</body>
</html>
